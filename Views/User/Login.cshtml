
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*<a href="/User/SignUp">Goto SignUp</a>*@


<div class="container">
     <div class="row" style="height:76vh;">
         <div class="col-md-6 h-100 d-flex justify-content-center">
             <img class="img-fluid w-100" src="https://assets-v2.lottiefiles.com/a/59ae3046-117b-11ee-88a7-ef3838e9662f/r8HuxylbzH.gif"/>
         </div>
         <div class="col-md-6">
             <form  class="needs-validation" novalidate>
                 <div class="row d-flex flex-column">
                     <h2 class="mt-4">Login Here</h2>
                     <div class="col-md-6 mb-3" style="margin-top:50px;">
                         <input type="email" id="username" class="form-control w-100" placeholder="UserName" autofocus="" required="" />
                         <div class="invalid-feedback">
                             Please provide valid User Name
                         </div>
                         <div class="valid-feedback">
                             Valid User Name
                         </div>
                     </div>
                     <div class="col-md-6">
                         <input type="password" id="pass" class="form-control w-100" placeholder="Password" autofocus="" required="" />
                         <div class="invalid-feedback">
                             Please provide valid Password
                         </div>
                     </div>
                 </div>

                 <div class="d-flex justify-content-start w-100">
                     <p>Don't have an account? <a href="/User/SignUp">SignUp/Register</a></p>
                     
                 </div>
                
                 <div class="col-md-6 d-flex justify-content-center" style="margin-left:90px;">
                     <div><button class="btn btn-primary" type="submit" onclick="validateNLogin()">Login</button></div>
                 </div>
             </form>

         </div>
     </div>
</div>


<script type="text/javascript">

    function validateNLogin() {
        var form = document.querySelector('.needs-validation'); // single form

        if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
            form.classList.add('was-validated'); // show Bootstrap styles
            return false; // stop further action
        }


        var uname = $("#username").val();
        var pas = $("#pass").val();
        $.ajax({

            type: "POST",
            url: '/User/UserLogin',
            data: JSON.stringify({
                email: uname,
                password:pas,
            }),
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                if (response.success) {
                    alert(response.message);
                    window.location.href = "/Home/Index";

                } 
      
            },
            error: function () {
                alert("Server error.");
            }
        });
    }



</script>


